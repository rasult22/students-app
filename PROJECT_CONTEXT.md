# Student Learning App - Контекст проекта

## Изначальный запрос

Приложение для студентов для изучения разных дисциплин.

**Авторизация/регистрация:** Пока скипнуто, просто спрашиваем имя и интересы ученика.

**Выбор предмета:** Список предметов для изучения. Пример: "Линейная алгебра". У предмета есть разделы (1, 2, 3...), в каждом разделе несколько тем.

**Диагностирование:** По предмету проводится тестирование на выявление пробелов в знаниях. Задаются вопросы разной сложности, выявляется в каких разделах есть пробелы. Адаптивный алгоритм или AI in the loop для выбора следующего вопроса. Формируется карта знания ученика по предмету.

**Карта знаний:** Визуализация знаний с помощью графа. Типы нод: раздел, тема, предмет. Цветовая семантика освоения. Карта доступна всегда в рабочей области предмета. Также глобальная карта знаний по всем предметам.

**Подача знаний:** Рабочая область по предмету с прогрессом по учебному плану. Если при диагностике выявлено хорошее знание — темы скипаются. По темам генерируются/подготавливаются: презентации (с учётом интересов для примеров), инфографика, тесты, мини-игры.

**Подытог:** После завершения всех тем — сертификат, глобальный тест, персональный итог курса (статистика в виде слайдов как итог года у Discord/Spotify).

---

## Что реализовано

### Технологии
- React 19 + Vite 7 + TypeScript 5.9
- Zustand 5 (state management с persistence в localStorage)
- React Router v7 (навигация)
- Cytoscape.js (графы карты знаний)
- Framer Motion 12 (анимации)
- CSS Modules + CSS Variables (стилизация)
- OpenAI API (генерация контента, модель gpt-4o-mini, Vision через gpt-4o)
- KaTeX + react-katex (рендеринг LaTeX формул)
- pdfjs-dist (конвертация PDF в изображения для OCR)

### Дизайн-система "Constellation"
- Научно-органическая тёмная тема
- Шрифты: Outfit, Crimson Pro, JetBrains Mono (локально через @fontsource)
- Биолюминесцентные акценты: cyan, violet, amber
- Mesh gradient фон, floating orbs, noise texture
- Анимации: staggered reveals, hover states, page transitions

### Функционал

1. **Онбординг**
   - Приветственный экран
   - Ввод имени
   - Выбор интересов (до 5) для персонализации

2. **Список предметов**
   - Карточки с описанием и прогрессом
   - 3 встроенных предмета: Линейная алгебра, Мат. анализ, Теория вероятностей
   - Кнопка создания пользовательского предмета

3. **Создание пользовательских предметов** (`/create-subject`)
   - Загрузка PDF файла (до 20 страниц)
   - Ввод URL веб-страницы
   - Извлечение текста через GPT-4 Vision (для PDF) или парсинг HTML (для URL)
   - AI-генерация структуры курса (разделы, темы) из извлечённого контента
   - Сохранение в `customSubjects` с флагом `isCustom: true`

4. **Рабочая область предмета**
   - Табы: Обзор, Диагностика, Учебный план, Повторение, Карта знаний
   - Обзор разделов курса с прогрессом
   - Круговой прогресс-индикатор

5. **Диагностика знаний**
   - Адаптивный алгоритм выбора вопросов
   - Приоритет разделов с низкой уверенностью
   - Подбор сложности по результатам
   - Feedback с объяснениями
   - Результаты по разделам

6. **Карта знаний (предмет)**
   - Интерактивный граф: предмет → разделы → темы
   - Цветовая семантика: mastered/learning/struggling/unknown
   - Легенда

7. **Глобальная карта знаний** (`/knowledge-map`)
   - Все предметы на одном графе
   - Общая статистика

8. **Учебный план**
   - Персональный план на основе диагностики
   - Пропуск освоенных тем
   - Отображение времени и сложности

9. **Система подачи материала (TopicLesson)**
   - **Теория** — текст с LaTeX формулами, ключевые тезисы
   - **Презентация** — слайды с навигацией (intro/concept/formula/example/summary)
   - **Примеры** — пошаговые решения с объяснениями
   - **Тест** — multiple choice с проверкой и объяснениями
   - **Карточки (Flashcards)** — кнопка "Добавить в колоду" для каждой карточки

10. **Spaced Repetition (SM-2)**
    - Алгоритм SuperMemo 2 для карточек
    - Ease Factor, интервалы, история повторений
    - 4 кнопки оценки: Не знаю / Не помню / Хорошо / Легко
    - Превью интервалов для каждой оценки
    - Статистика: освоено / изучается / новые

11. **Review Deck (колода повторения по предмету)**
    - Отдельный таб "Повторение" в рабочей области предмета
    - Карточки добавляются вручную через "Добавить в колоду" (не автоматически)
    - Только карточки из `addedToReviewDeck` участвуют в сессиях повторения
    - Режим "Чилл" когда нет карточек к повторению
    - Показывает когда будет следующее повторение
    - Отображает из какой темы/раздела карточка

12. **Финальный тест**
    - Таб "Финальный тест" в рабочей области предмета (иконка Trophy)
    - Доступен только после изучения всех тем (`attempts > 0` для каждой темы)
    - AI-генерация 15-25 вопросов по всему курсу (`finalTestGenerator.ts`)
    - Распределение сложности: 30% beginner, 50% intermediate, 20% advanced
    - Фазы: intro → testing → results
    - История попыток, лучший результат, возможность пересдачи (неограниченно)
    - Breakdown результатов по разделам

13. **Персональный итог (Course Wrapped)**
    - Fullscreen слайды в стиле Spotify Wrapped
    - 10-12 слайдов: intro, финальный балл, темы, лучший раздел, прогресс, карточки, активность, breakdown по разделам, сертификат, outro
    - Анимации: count-up (числа), reveal (текст), progress (бары), confetti (достижения)
    - Swipe/keyboard навигация между слайдами
    - Генератор слайдов (`wrappedGenerator.ts`)
    - Сохранение в store для повторного просмотра

14. **Сертификат**
    - Превью сертификата в Course Wrapped
    - Grade: excellent (90%+), good (70-89%), satisfactory (50-69%)
    - Имя пользователя, название курса, дата завершения, оценка

15. **AI-генерация контента (OpenAI)**
    - Генератор уроков (`lessonGenerator.ts`)
    - Генератор вопросов диагностики (`questionGenerator.ts`)
    - Генератор структуры предмета (`structureGenerator.ts`)
    - Генератор финального теста (`finalTestGenerator.ts`)
    - Генератор слайдов Wrapped (`wrappedGenerator.ts`)
    - Извлечение текста из PDF/URL (`contentExtractor.ts`)
    - Промпты с учётом интересов ученика для персонализации

### UI компоненты
- `MathText` — рендеринг inline/block LaTeX через KaTeX
- `MarkdownMath` — Markdown + LaTeX с автодетектом формул
- `Button`, `Input`, `Card` — базовые UI примитивы
- `PageTransition`, `AppHeader` — лейаут компоненты
- `FinalTest` — финальный тест по курсу (intro/testing/results phases)
- `CourseWrapped` — персональный итог в стиле Spotify Wrapped (fullscreen слайды)

### Данные и хранение
- Структура предметов (разделы, темы)
- Вопросы для диагностики по Линейной алгебре
- Список интересов по категориям
- Прогресс карточек (`flashcardProgress` в store)
- Карточки в колоде (`addedToReviewDeck` в store)
- Пользовательские предметы (`customSubjects` в store)
- История финальных тестов (`finalTestHistory` в store)
- Сохранённые Wrapped (`courseWrapped` в store)
- Всё хранится в localStorage под ключом `student-app-storage`

---

## Что ещё не реализовано

- Мини-игры для закрепления
- Скачивание сертификата как PNG
- Авторизация/регистрация
- Backend / база данных

---

## Переменные окружения

```
VITE_OPENAI_API_KEY=sk-...
```

---

## Запуск

```bash
npm install
npm run dev
```

Открыть http://localhost:5173
