import type { Subject, DiagnosticQuestion } from '../types';

export const subjects: Subject[] = [
  {
    id: 'linear-algebra',
    name: 'Линейная алгебра',
    description: 'Векторы, матрицы, системы линейных уравнений и линейные преобразования',
    icon: 'calculator',
    color: '#00d4aa',
    estimatedHours: 40,
    sections: [
      {
        id: 'la-section-1',
        subjectId: 'linear-algebra',
        name: 'Матрицы и определители',
        description: 'Основы работы с матрицами, вычисление определителей',
        order: 1,
        topics: [
          {
            id: 'la-topic-1-1',
            sectionId: 'la-section-1',
            name: 'Виды матриц',
            description: 'Квадратные, прямоугольные, единичные, нулевые матрицы',
            order: 1,
            difficulty: 'beginner',
            estimatedMinutes: 30,
          },
          {
            id: 'la-topic-1-2',
            sectionId: 'la-section-1',
            name: 'Операции с матрицами',
            description: 'Сложение, умножение матриц, умножение на скаляр',
            order: 2,
            difficulty: 'beginner',
            estimatedMinutes: 45,
          },
          {
            id: 'la-topic-1-3',
            sectionId: 'la-section-1',
            name: 'Определители',
            description: 'Вычисление определителей 2x2 и 3x3, свойства',
            order: 3,
            difficulty: 'intermediate',
            estimatedMinutes: 60,
          },
          {
            id: 'la-topic-1-4',
            sectionId: 'la-section-1',
            name: 'Обратная матрица',
            description: 'Нахождение обратной матрицы, условия существования',
            order: 4,
            difficulty: 'intermediate',
            estimatedMinutes: 45,
          },
        ],
      },
      {
        id: 'la-section-2',
        subjectId: 'linear-algebra',
        name: 'Системы линейных уравнений',
        description: 'Методы решения систем, матричная форма записи',
        order: 2,
        topics: [
          {
            id: 'la-topic-2-1',
            sectionId: 'la-section-2',
            name: 'Метод Гаусса',
            description: 'Прямой и обратный ход метода Гаусса',
            order: 1,
            difficulty: 'intermediate',
            estimatedMinutes: 60,
          },
          {
            id: 'la-topic-2-2',
            sectionId: 'la-section-2',
            name: 'Метод Крамера',
            description: 'Решение систем через определители',
            order: 2,
            difficulty: 'intermediate',
            estimatedMinutes: 45,
          },
          {
            id: 'la-topic-2-3',
            sectionId: 'la-section-2',
            name: 'Матричный метод',
            description: 'Решение через обратную матрицу',
            order: 3,
            difficulty: 'intermediate',
            estimatedMinutes: 45,
          },
          {
            id: 'la-topic-2-4',
            sectionId: 'la-section-2',
            name: 'Ранг матрицы',
            description: 'Определение ранга, теорема Кронекера-Капелли',
            order: 4,
            difficulty: 'advanced',
            estimatedMinutes: 60,
          },
        ],
      },
      {
        id: 'la-section-3',
        subjectId: 'linear-algebra',
        name: 'Векторные пространства',
        description: 'Векторы, базис, размерность, линейная зависимость',
        order: 3,
        topics: [
          {
            id: 'la-topic-3-1',
            sectionId: 'la-section-3',
            name: 'Векторы и операции',
            description: 'Сложение векторов, скалярное умножение',
            order: 1,
            difficulty: 'beginner',
            estimatedMinutes: 30,
          },
          {
            id: 'la-topic-3-2',
            sectionId: 'la-section-3',
            name: 'Линейная зависимость',
            description: 'Определение, критерии линейной зависимости',
            order: 2,
            difficulty: 'intermediate',
            estimatedMinutes: 45,
          },
          {
            id: 'la-topic-3-3',
            sectionId: 'la-section-3',
            name: 'Базис и размерность',
            description: 'Построение базиса, определение размерности',
            order: 3,
            difficulty: 'intermediate',
            estimatedMinutes: 60,
          },
          {
            id: 'la-topic-3-4',
            sectionId: 'la-section-3',
            name: 'Скалярное произведение',
            description: 'Свойства, геометрический смысл, ортогональность',
            order: 4,
            difficulty: 'intermediate',
            estimatedMinutes: 45,
          },
        ],
      },
      {
        id: 'la-section-4',
        subjectId: 'linear-algebra',
        name: 'Линейные преобразования',
        description: 'Линейные операторы, собственные числа и векторы',
        order: 4,
        topics: [
          {
            id: 'la-topic-4-1',
            sectionId: 'la-section-4',
            name: 'Линейные операторы',
            description: 'Определение, матрица линейного оператора',
            order: 1,
            difficulty: 'intermediate',
            estimatedMinutes: 45,
          },
          {
            id: 'la-topic-4-2',
            sectionId: 'la-section-4',
            name: 'Собственные числа',
            description: 'Характеристическое уравнение, вычисление',
            order: 2,
            difficulty: 'advanced',
            estimatedMinutes: 60,
          },
          {
            id: 'la-topic-4-3',
            sectionId: 'la-section-4',
            name: 'Собственные векторы',
            description: 'Нахождение собственных векторов',
            order: 3,
            difficulty: 'advanced',
            estimatedMinutes: 60,
          },
          {
            id: 'la-topic-4-4',
            sectionId: 'la-section-4',
            name: 'Диагонализация',
            description: 'Приведение матрицы к диагональному виду',
            order: 4,
            difficulty: 'advanced',
            estimatedMinutes: 75,
          },
        ],
      },
    ],
  },
  {
    id: 'calculus',
    name: 'Математический анализ',
    description: 'Пределы, производные, интегралы и ряды',
    icon: 'sigma',
    color: '#a78bfa',
    estimatedHours: 60,
    sections: [
      {
        id: 'calc-section-1',
        subjectId: 'calculus',
        name: 'Пределы',
        description: 'Понятие предела, вычисление пределов',
        order: 1,
        topics: [
          {
            id: 'calc-topic-1-1',
            sectionId: 'calc-section-1',
            name: 'Понятие предела',
            description: 'Определение, свойства пределов',
            order: 1,
            difficulty: 'beginner',
            estimatedMinutes: 45,
          },
          {
            id: 'calc-topic-1-2',
            sectionId: 'calc-section-1',
            name: 'Замечательные пределы',
            description: 'Первый и второй замечательные пределы',
            order: 2,
            difficulty: 'intermediate',
            estimatedMinutes: 60,
          },
        ],
      },
      {
        id: 'calc-section-2',
        subjectId: 'calculus',
        name: 'Производные',
        description: 'Дифференцирование функций',
        order: 2,
        topics: [
          {
            id: 'calc-topic-2-1',
            sectionId: 'calc-section-2',
            name: 'Понятие производной',
            description: 'Определение, геометрический смысл',
            order: 1,
            difficulty: 'beginner',
            estimatedMinutes: 45,
          },
          {
            id: 'calc-topic-2-2',
            sectionId: 'calc-section-2',
            name: 'Правила дифференцирования',
            description: 'Производная суммы, произведения, частного',
            order: 2,
            difficulty: 'intermediate',
            estimatedMinutes: 60,
          },
        ],
      },
    ],
  },
  {
    id: 'probability',
    name: 'Теория вероятностей',
    description: 'Случайные события, вероятности, распределения',
    icon: 'dices',
    color: '#fbbf24',
    estimatedHours: 35,
    sections: [
      {
        id: 'prob-section-1',
        subjectId: 'probability',
        name: 'Основы вероятности',
        description: 'Случайные события и их вероятности',
        order: 1,
        topics: [
          {
            id: 'prob-topic-1-1',
            sectionId: 'prob-section-1',
            name: 'Случайные события',
            description: 'Виды событий, операции над событиями',
            order: 1,
            difficulty: 'beginner',
            estimatedMinutes: 30,
          },
          {
            id: 'prob-topic-1-2',
            sectionId: 'prob-section-1',
            name: 'Классическая вероятность',
            description: 'Определение и вычисление вероятности',
            order: 2,
            difficulty: 'beginner',
            estimatedMinutes: 45,
          },
        ],
      },
    ],
  },
];

// Diagnostic questions for Linear Algebra
export const diagnosticQuestions: DiagnosticQuestion[] = [
  // Section 1: Matrices
  {
    id: 'dq-1-1',
    topicId: 'la-topic-1-1',
    sectionId: 'la-section-1',
    text: 'Какая матрица называется квадратной?',
    type: 'single-choice',
    difficulty: 'beginner',
    options: [
      { id: 'a', text: 'Матрица, у которой число строк равно числу столбцов', isCorrect: true },
      { id: 'b', text: 'Матрица, все элементы которой равны нулю', isCorrect: false },
      { id: 'c', text: 'Матрица с одной строкой', isCorrect: false },
      { id: 'd', text: 'Матрица, определитель которой равен 1', isCorrect: false },
    ],
    correctAnswer: 'a',
    explanation: 'Квадратная матрица — это матрица, у которой количество строк равно количеству столбцов (n×n).',
  },
  {
    id: 'dq-1-2',
    topicId: 'la-topic-1-2',
    sectionId: 'la-section-1',
    text: 'Чему равно произведение матрицы 2×3 на матрицу 3×4?',
    type: 'single-choice',
    difficulty: 'beginner',
    options: [
      { id: 'a', text: 'Матрица 2×4', isCorrect: true },
      { id: 'b', text: 'Матрица 3×3', isCorrect: false },
      { id: 'c', text: 'Матрица 2×3', isCorrect: false },
      { id: 'd', text: 'Произведение не определено', isCorrect: false },
    ],
    correctAnswer: 'a',
    explanation: 'При умножении матрицы m×n на матрицу n×k получается матрица m×k. Здесь: 2×3 · 3×4 = 2×4.',
  },
  {
    id: 'dq-1-3',
    topicId: 'la-topic-1-3',
    sectionId: 'la-section-1',
    text: 'Вычислите определитель матрицы:\n|3  1|\n|2  4|',
    type: 'single-choice',
    difficulty: 'intermediate',
    options: [
      { id: 'a', text: '10', isCorrect: true },
      { id: 'b', text: '14', isCorrect: false },
      { id: 'c', text: '12', isCorrect: false },
      { id: 'd', text: '5', isCorrect: false },
    ],
    correctAnswer: 'a',
    explanation: 'Определитель 2×2 матрицы: |a b; c d| = ad - bc. Здесь: 3·4 - 1·2 = 12 - 2 = 10.',
  },
  {
    id: 'dq-1-4',
    topicId: 'la-topic-1-4',
    sectionId: 'la-section-1',
    text: 'Когда матрица имеет обратную?',
    type: 'single-choice',
    difficulty: 'intermediate',
    options: [
      { id: 'a', text: 'Когда её определитель не равен нулю', isCorrect: true },
      { id: 'b', text: 'Когда она квадратная', isCorrect: false },
      { id: 'c', text: 'Когда все элементы положительные', isCorrect: false },
      { id: 'd', text: 'Когда она симметричная', isCorrect: false },
    ],
    correctAnswer: 'a',
    explanation: 'Обратная матрица существует тогда и только тогда, когда определитель исходной матрицы отличен от нуля (матрица невырожденная).',
  },
  // Section 2: Systems
  {
    id: 'dq-2-1',
    topicId: 'la-topic-2-1',
    sectionId: 'la-section-2',
    text: 'Метод Гаусса основан на:',
    type: 'single-choice',
    difficulty: 'intermediate',
    options: [
      { id: 'a', text: 'Элементарных преобразованиях строк матрицы', isCorrect: true },
      { id: 'b', text: 'Вычислении определителей', isCorrect: false },
      { id: 'c', text: 'Нахождении обратной матрицы', isCorrect: false },
      { id: 'd', text: 'Подстановке значений', isCorrect: false },
    ],
    correctAnswer: 'a',
    explanation: 'Метод Гаусса использует элементарные преобразования строк для приведения матрицы к ступенчатому виду.',
  },
  {
    id: 'dq-2-2',
    topicId: 'la-topic-2-2',
    sectionId: 'la-section-2',
    text: 'По формулам Крамера можно решить систему, если:',
    type: 'single-choice',
    difficulty: 'intermediate',
    options: [
      { id: 'a', text: 'Определитель основной матрицы не равен нулю', isCorrect: true },
      { id: 'b', text: 'Система имеет бесконечно много решений', isCorrect: false },
      { id: 'c', text: 'Матрица системы прямоугольная', isCorrect: false },
      { id: 'd', text: 'Все коэффициенты целые числа', isCorrect: false },
    ],
    correctAnswer: 'a',
    explanation: 'Метод Крамера применим только к системам с квадратной матрицей, определитель которой не равен нулю.',
  },
  // Section 3: Vector spaces
  {
    id: 'dq-3-1',
    topicId: 'la-topic-3-1',
    sectionId: 'la-section-3',
    text: 'Сумма векторов (1, 2, 3) и (4, 5, 6) равна:',
    type: 'single-choice',
    difficulty: 'beginner',
    options: [
      { id: 'a', text: '(5, 7, 9)', isCorrect: true },
      { id: 'b', text: '(4, 10, 18)', isCorrect: false },
      { id: 'c', text: '(3, 3, 3)', isCorrect: false },
      { id: 'd', text: '(5, 5, 5)', isCorrect: false },
    ],
    correctAnswer: 'a',
    explanation: 'Сложение векторов происходит покомпонентно: (1+4, 2+5, 3+6) = (5, 7, 9).',
  },
  {
    id: 'dq-3-2',
    topicId: 'la-topic-3-2',
    sectionId: 'la-section-3',
    text: 'Векторы линейно зависимы, если:',
    type: 'single-choice',
    difficulty: 'intermediate',
    options: [
      { id: 'a', text: 'Один из них выражается через остальные', isCorrect: true },
      { id: 'b', text: 'Они все ненулевые', isCorrect: false },
      { id: 'c', text: 'Они имеют одинаковую длину', isCorrect: false },
      { id: 'd', text: 'Их скалярное произведение равно нулю', isCorrect: false },
    ],
    correctAnswer: 'a',
    explanation: 'Векторы линейно зависимы, если существует их нетривиальная линейная комбинация, равная нулю, т.е. один вектор можно выразить через другие.',
  },
  // Section 4: Linear transformations
  {
    id: 'dq-4-1',
    topicId: 'la-topic-4-1',
    sectionId: 'la-section-4',
    text: 'Линейный оператор сохраняет:',
    type: 'single-choice',
    difficulty: 'intermediate',
    options: [
      { id: 'a', text: 'Операции сложения векторов и умножения на скаляр', isCorrect: true },
      { id: 'b', text: 'Длины всех векторов', isCorrect: false },
      { id: 'c', text: 'Углы между всеми векторами', isCorrect: false },
      { id: 'd', text: 'Только нулевой вектор', isCorrect: false },
    ],
    correctAnswer: 'a',
    explanation: 'По определению, линейный оператор L удовлетворяет: L(u+v) = L(u) + L(v) и L(αv) = αL(v).',
  },
  {
    id: 'dq-4-2',
    topicId: 'la-topic-4-2',
    sectionId: 'la-section-4',
    text: 'Собственное число матрицы — это корень:',
    type: 'single-choice',
    difficulty: 'advanced',
    options: [
      { id: 'a', text: 'Характеристического уравнения det(A - λE) = 0', isCorrect: true },
      { id: 'b', text: 'Уравнения det(A) = 0', isCorrect: false },
      { id: 'c', text: 'Системы линейных уравнений Ax = b', isCorrect: false },
      { id: 'd', text: 'Уравнения trace(A) = λ', isCorrect: false },
    ],
    correctAnswer: 'a',
    explanation: 'Собственные числа находятся из характеристического уравнения det(A - λE) = 0, где E — единичная матрица.',
  },
];

export const getSubjectById = (id: string): Subject | undefined => {
  return subjects.find((s) => s.id === id);
};

export const getQuestionsForSection = (sectionId: string): DiagnosticQuestion[] => {
  return diagnosticQuestions.filter((q) => q.sectionId === sectionId);
};

export const getQuestionsForSubject = (subjectId: string): DiagnosticQuestion[] => {
  const subject = getSubjectById(subjectId);
  if (!subject) return [];

  const sectionIds = subject.sections.map((s) => s.id);
  return diagnosticQuestions.filter((q) => sectionIds.includes(q.sectionId));
};
